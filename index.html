<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Shree Chakrdhar Enterprises</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{font-family:Arial;background:#f2f2f2;padding:15px}
h2,h3{text-align:center}
.box{background:#fff;padding:15px;margin:15px auto;max-width:900px;border-radius:6px}
input,select,textarea,button{width:100%;padding:8px;margin:6px 0}
button{background:#000;color:#fff;border:none;cursor:pointer}
.admin-panel{display:none;border:2px solid #000}
.car-card{border:1px solid #ddd;padding:10px;margin:10px 0}
.img-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(90px,1fr));gap:6px}
.img-grid img{width:100%;height:80px;object-fit:cover;border-radius:4px}
</style>
</head>
<body>

<h2>ðŸš— Shree Chakrdhar Enterprises</h2>

<!-- OUR CARS -->
<div class="box">
<h3>Our Cars</h3>
<div id="carsContainer"></div>
</div>

<!-- BOOKING FORM -->
<div class="box">
<h3>Book Your Car</h3>
<form id="bookingForm">
<input id="custName" placeholder="Full Name" required>
<input id="custMobile" placeholder="Mobile Number" required>
<select id="custCar" required>
  <option value="">Select Car</option>
</select>
<input type="date" id="fromDate" required>
<input type="date" id="toDate" required>
<button type="submit">Submit Booking</button>
</form>
<p id="bookingMsg"></p>
</div>

<!-- ADMIN LOGIN -->
<div class="box">
<h3>Admin Login</h3>
<input id="adminUser" placeholder="Username">
<input id="adminPass" type="password">
<button id="loginBtn">Login</button>
<p id="loginMsg"></p>
</div>

<!-- ADMIN PANEL -->
<div class="box admin-panel" id="adminPanel">
<h3>Admin â€“ Add / Update Car</h3>

<input id="carName" placeholder="Car Name">
<input id="carPrice" placeholder="Price per day">
<input id="carReg" placeholder="Registration (HR-xx-1234)">
<textarea id="carDesc" placeholder="Description"></textarea>
<textarea id="carPhotos" placeholder="Photo URLs (min 5, one per line)"></textarea>

<button id="saveCarBtn">Save / Update Car</button>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey: "AIzaSyAceQf7DxVI9d_-HnVchw4tmiBCSy2P3NI",
  authDomain: "shree-chakrdhar-booking-ed24a.firebaseapp.com",
  projectId: "shree-chakrdhar-booking-ed24a"
});
const db = firebase.firestore();
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {

  /* ===== ADMIN LOGIN ===== */
  const USER="jangrah247", PASS="jangra2025";
  loginBtn.onclick=()=>{
    if(adminUser.value===USER && adminPass.value===PASS){
      adminPanel.style.display="block";
      loginMsg.innerText="Login successful";
      loginMsg.style.color="green";
    }else{
      loginMsg.innerText="Wrong username or password";
      loginMsg.style.color="red";
    }
  };

  /* ===== SAVE / UPDATE CAR ===== */
  saveCarBtn.onclick=()=>{
    const photos = carPhotos.value.split("\n").map(p=>p.trim()).filter(Boolean);
    if(photos.length<5){alert("Minimum 5 photo URLs required");return;}

    db.collection("cars").doc(carName.value).set({
      name: carName.value,
      price: carPrice.value,
      reg: carReg.value,
      description: carDesc.value,
      photos: photos
    });
    alert("Car saved / updated");
    carName.value=carPrice.value=carReg.value=carDesc.value=carPhotos.value="";
  };

  /* ===== LOAD CARS (PUBLIC + BOOKING DROPDOWN) ===== */
  db.collection("cars").onSnapshot(snap=>{
    carsContainer.innerHTML="";
    custCar.innerHTML='<option value="">Select Car</option>';

    snap.forEach(doc=>{
      const c=doc.data();
      custCar.innerHTML+=`<option>${c.name}</option>`;

      let imgs="";
      c.photos.forEach(p=>imgs+=`<img src="${p}">`);
      carsContainer.innerHTML+=`
        <div class="car-card">
          <b>${c.name}</b> â€“ â‚¹${c.price}/day<br>
          <b>Reg:</b> ${c.reg}<br>
          ${c.description}
          <div class="img-grid">${imgs}</div>
        </div>`;
    });
  });

  /* ===== BOOKING SUBMIT ===== */
  bookingForm.onsubmit=e=>{
    e.preventDefault();
    db.collection("bookings").add({
      name:custName.value,
      mobile:custMobile.value,
      car:custCar.value,
      from:fromDate.value,
      to:toDate.value,
      status:"Pending",
      time:new Date()
    });
    bookingMsg.innerText="Booking submitted. Status: Pending";
    bookingMsg.style.color="green";
    bookingForm.reset();
  };

});
</script>

</body>
</html>
